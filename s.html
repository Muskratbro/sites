<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Webhost Viewer</title>
<style>
body { margin: 0; font-family: sans-serif; background: #0d0d0d; color: white; text-align: center; }
iframe { width: 100%; height: 90vh; border: none; display: block; margin-top: 20px; }
</style>
</head>
<body>
<h1>Mini Webhost Viewer</h1>
<p id="status">Loading site...</p>
<iframe id="siteFrame" style="display:none"></iframe>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js";

const SUPABASE_URL = "https://lpzlnnpeoakwqpnqtthl.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxwemxubnBlb2Frd3FwbnF0dGhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3NTI4NTgsImV4cCI6MjA3OTMyODg1OH0.S4LDwac_mH7VqYxk4h9VkgGoLOtYk3s3v16rXzdM_Ek";
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const params = new URLSearchParams(window.location.search);
const username = params.get("user");
const status = document.getElementById("status");
const iframe = document.getElementById("siteFrame");

if (!username) {
  status.innerText = "No user specified!";
} else {
  const url = `${SUPABASE_URL}/storage/v1/object/public/sites/${username}/index.html`;
  iframe.src = url;
  iframe.style.display = "block";
  status.style.display = "none";
}
</script>
</body>
</html>
