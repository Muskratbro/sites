<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Webhost Viewer</title>
<style>
body { margin: 0; font-family: sans-serif; background: #0d0d0d; color: white; text-align: center; }
iframe { width: 100%; height: 90vh; border: none; display: block; margin-top: 20px; }
</style>
</head>
<body>
<h1>Mini Webhost Viewer</h1>
<p id="status">Loading site...</p>
<iframe id="siteFrame" style="display:none"></iframe>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js";

const SUPABASE_URL = "https://zsuirwfcmrsmmxinikmw.supabase.co";
const SUPABASE_KEY = "YOUR_ANON_KEY";
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const status = document.getElementById("status");
const iframe = document.getElementById("siteFrame");

// Extract username from path
let pathParts = window.location.pathname.split('/');
let user = pathParts[2]; // /s/username

if (!user) {
  status.innerText = "No username specified!";
} else {
  const url = `${SUPABASE_URL}/storage/v1/object/public/sites/${user}/index.html`;
  iframe.src = url;
  iframe.style.display = "block";
  status.style.display = "none";
}
</script>
</body>
</html>
